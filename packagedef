////////////////////////////////////////////////////////////
// Описание пакета для сборки и установки
// Полную документацию см. на hub.oscript.io/packaging
//
Процедура ПередСборкой(Знач РабочийКаталог) Экспорт

	ФС.ОбеспечитьПустойКаталог(ОбъединитьПути(РабочийКаталог, "oscript_modules"));

	//Лог.Информация("Установка локальных зависимостей библиотек");
	КомандаOpm = Новый Команда;

	КомандаOpm.УстановитьКоманду("opm");
	КомандаOpm.ДобавитьПараметр("install -l");	
	КомандаOpm.ДобавитьЛогВыводаКоманды("task.build");

	КодВозврата = КомандаOpm.Исполнить();

	Если КодВозврата <> 0  Тогда
        ВызватьИсключение КомандаOpm.ПолучитьВывод();
	КонецЕсли;
	
КонецПроцедуры

Описание.Имя("gitsync-plugins")
        .Версия("1.1.0")
        .Автор("Khorev A.A. and SilverBulleters")
        .АдресАвтора("khorevaa@gmail.com,help@silverbulleters.org")
        .Описание("Набор предустановленных плагинов для gitsync")
        .ВерсияСреды("1.2.0")
        .ВключитьФайл("src")
        .ВключитьФайл("docs")
        .ВключитьФайл("oscript_modules")
        //.ЗависитОт("logos", "0.4") // Зависимость gitsync
        //.ЗависитОт("v8runner", "1.0.5") // Зависимость gitsync
        //.ЗависитОт("gitrunner", "1.5.1") // Зависимость gitsync
        .ЗависитОт("strings", "0.4.1")
        //.ЗависитОт("1commands", "1.3.5") // Зависимость gitsync
        //.ЗависитОт("v8storage") // Зависимость gitsync
        .ОпределяетКласс("Плагин_ИнкрементальнаяВыгрузка", "src/Классы/increment.os")
        .ОпределяетКласс("Плагин_УстановкиЛимитов", "src/Классы/limit.os")
        .ОпределяетКласс("Плагин_ПроверкиАвторов", "src/Классы/checkAuthors.os")
        .ОпределяетКласс("Плагин_ПроверкиКомментариев", "src/Классы/checkComments.os")
        .ОпределяетКласс("Плагин_УстановкиТеговВерсий", "src/Классы/smartTags.os")
        .ОпределяетКласс("Плагин_Tool1CD", "src/Классы/tool1CD.os")
        .ОпределяетКласс("Плагин_РаспаковкиОбычныхФорм", "src/Классы/unpackForm.os")
        .ОпределяетКласс("Плагин_СнятияСПоддержки", "src/Классы/disableSupport.os")
        .ОпределяетКласс("Плагин_СинхронизацииСУдаленнымРепозиторием", "src/Классы/syncRemote.os")
        ;
